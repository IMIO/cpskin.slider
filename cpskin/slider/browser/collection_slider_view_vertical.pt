<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">


<body>

<metal:content-core fill-slot="content-core">
  <metal:block define-macro="content-core">
    <metal:block use-macro="context/standard_view/macros/content-core">
      <metal:entries fill-slot="entries">
            <tal:defres tal:define="results python: view.getResults(content, with_sticky=False)">
        <link rel="stylesheet" type="text/css" href=""
              tal:attributes="href string:${context/@@plone_portal_state/portal_url}/++resource++jquery.flexslider/css/slider-pro.css" />

        <script type="text/javascript"
                charset="utf-8"
                src=""
                tal:attributes="src string:${context/@@plone_portal_state/portal_url}/++resource++jquery.flexslider/javascript/jquery.sliderpro.js"></script>


        <script type="text/javascript">
            $(document).ready(function( $ ) {
                $( '.vertical-slider' ).sliderPro({
                    width: 670,
                    height: 500,
                    orientation: 'vertical',
                    loop: false,
                    arrows: true,
                    buttons: false,
                    thumbnailsPosition: 'right',
                    responsive:true,
                    thumbnailPointer: true,
                    thumbnailWidth: 290,
                    breakpoints: {
                        800: {
                            thumbnailsPosition: 'bottom',
                            thumbnailWidth: 270,
                            thumbnailHeight: 100
                        },
                        500: {
                            thumbnailsPosition: 'bottom',
                            thumbnailWidth: 120,
                            thumbnailHeight: 50
                        }
                    }
                });
            });
        </script>

        <div class="titre-slider"
             tal:define="hide_title python: getattr(context, 'hide_title', False);"
             tal:condition="not: hide_title">
            <a tal:omit-tag='python: view.hide_see_all_link(context)'
               href=""
               tal:attributes="href string:${context/absolute_url}">
                <h2 tal:content="content/Title"></h2>
            </a>
        </div>
        <div id=""
             class="slider vertical-slider"
             tal:define="bloc_class python: view.get_block_class(content)"
             tal:attributes="id string:slider-${context/id}">

            <div class="sp-slides">
                <tal:entry tal:repeat="item results">
                <tal:block tal:define="slider_scale python: getattr(context, 'slider_image_scale', 'slider');
                                       obj item/getObject;
                                       scale_func obj/@@images;
                                       scaled_image python: getattr(obj, 'image', False) and scale_func.scale('image', scale=slider_scale);
                                       item_url item/getURL;
                                       item_id item/getId;
                                       item_title item/Title;
                                       item_description item/Description;">

                    <div class="sp-slide" tal:condition="scaled_image">
                      <a tal:attributes="href item_url">
                        <img tal:replace="structure python: scaled_image.tag(css_class='sp-image')" />
                        <div class="sp-caption" tal:content="python:item_description"></div>
                      </a>
                    </div>

                </tal:block>
                </tal:entry>
            </div>
            <div class="sp-thumbnails" >
                <tal:entry tal:repeat="item results">
                <tal:block tal:define="slider_scale python: getattr(context, 'slider_image_scale', 'slider');
                                       obj item/getObject;
                                       scale_func obj/@@images;
                                       scaled_image python: getattr(obj, 'image', False) and scale_func.scale('image', scale=slider_scale);
                                       item_url item/getURL;
                                       item_id item/getId;
                                       item_description item/Description;
                                       item_title item/Title;">

                    <div class="sp-thumbnail" tal:condition="scaled_image">
                        <div class="sp-thumbnail-image-container">
                            <img tal:replace="structure python: scaled_image.tag(css_class='sp-thumbnail-image')" />
                        </div>
                        <div class="sp-thumbnail-text">
                            <div class="sp-thumbnail-title" tal:content="item_title"></div>
                        	<div class="sp-thumbnail-description" tal:content="item_description"></div>
                        </div>
                    </div>

                </tal:block>
                </tal:entry>
            </div>
        </div>
	</tal:defres>
      </metal:entries>
    </metal:block>
  </metal:block>
</metal:content-core>

</body>
</html>
