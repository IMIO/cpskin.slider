<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>
    <metal:content-core fill-slot="content-core">
        <metal:block use-macro="context/standard_view/macros/content-core">
            <metal:entries fill-slot="entries">
            <div id="slider" class="flexslider">
            <ul class="slides">
                    <tal:entry tal:repeat="item batch">
                    <tal:block tal:define="item_url item/getURL;
                                           item_id item/getId;
                                           item_description item/Description;
                                           item_type item/Type;
                                           item_modified item/ModificationDate;
                                           item_created item/CreationDate;
                                           item_icon item/getIcon;
                                           item_type_class item/ContentTypeClass;
                                           item_wf_state_class python:'state-' + normalizeString(item.review_state());
                                           item_creator item/Creator;
                                           item_start python:(item.start or item.StartDate) if item_type == 'Event' else None;
                                           item_end python:(item.end or item.EndDate) if item_type == 'Event' else None;
                                           item_modified item/ModificationDate;
                                           item_sametime python: item_start == item_end;
                                           item_samedate python: (item_end - item_start &lt; 1) if item_type == 'Event' else False">

                                  <li tal:define="obj item/getObject">
                                      <a href="#"
                                         class="linkimg"
                                         tal:condition="obj/image|nothing"
                                         tal:attributes="href item/getURL">
                                         <img src="" alt=""
                                              tal:define="scales obj/@@images;
                                                          scale python:scales.scale('image', 'thumb')"
                                              tal:replace="structure python:scale and scale.tag(css_class='flexsliderimg') or None" />
                                      </a>
                                      <div class="flex-caption">
                                          <h2>
                                              <a tal:attributes="href item/getURL"
                                                 tal:content="item/Title">Content title</a>
                                         </h2>
                                         <p> <a tal:attributes="href item/getURL"
                                                tal:content="item/Description">
                                               Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
                                               sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat.
                                               Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit
                                               lobortis nisl ut aliquip ex ea commodo consequat.</a>
                                          </p>
                                      </div>
                                  </li>
                    </tal:block>
                    </tal:entry>
            </ul>
            </div>
            <div id="carousel" class="flexslider">
            <ul class="slides">
                    <tal:entry tal:repeat="item batch">
                    <tal:block tal:define="item_url item/getURL;
                                           item_id item/getId;
                                           item_description item/Description;
                                           item_type item/Type;
                                           item_modified item/ModificationDate;
                                           item_created item/CreationDate;
                                           item_icon item/getIcon;
                                           item_type_class item/ContentTypeClass;
                                           item_wf_state_class python:'state-' + normalizeString(item.review_state());
                                           item_creator item/Creator;
                                           item_start python:(item.start or item.StartDate) if item_type == 'Event' else None;
                                           item_end python:(item.end or item.EndDate) if item_type == 'Event' else None;
                                           item_modified item/ModificationDate;
                                           item_sametime python: item_start == item_end;
                                           item_samedate python: (item_end - item_start &lt; 1) if item_type == 'Event' else False">

                                  <li tal:define="obj item/getObject">
                                      <a href="#"
                                         class="linkimg"
                                         tal:condition="obj/image|nothing"
                                         tal:attributes="href item/getURL">
                                         <img src="" alt=""
                                              tal:define="scales obj/@@images;
                                                          scale python:scales.scale('image', 'thumb')"
                                              tal:replace="structure python:scale and scale.tag(css_class='flexsliderimg') or None" />
                                      </a>
                                      <div class="flex-caption">
                                          <h2>
                                              <a tal:attributes="href item/getURL"
                                                 tal:content="item/Title">Content title</a>
                                         </h2>
                                      </div>
                                  </li>
                    </tal:block>
                    </tal:entry>
            </ul>
            </div>
            <script type="text/javascript">
                (function($) {
                     "use strict";
                     $('#carousel').flexslider({
                       animation: "slide",
                       controlNav: false,
                       animationLoop: false,
                       slideshow: false,
                       itemWidth: 210,
                       itemMargin: 5,
                       asNavFor: '#slider'
                     });
                     $('#slider').flexslider({
                       animation: "slide",
                       controlNav: false,
                       animationLoop: false,
                       slideshow: false,
                       sync: "#carousel"
                     });
                 })(jQuery);
            </script>
            </metal:entries>
        </metal:block>
    </metal:content-core>
</body>
</html>
